cmake_minimum_required(VERSION 3.6)
project(Servidor)
set(CMAKE_BUILD_TYPE Debug)

set(CMAKE_EXE_LINKER_FLAGS "-static-libgcc -static-libstdc++")
SET(CMAKE_CXX_FLAGS -pthread)

add_subdirectory(yaml-cpp)
add_subdirectory(3rd_party/Box2D-cmake)

set(SOURCE_FILES main.cpp
        Comunicacion/Eventos/EventosParseables/EnviarCarro.cpp Comunicacion/Eventos/EventosParseables/EnviarCarro.h
        Comunicacion/Sockets/SocketPasivo.cpp Comunicacion/Sockets/SocketAmigo.cpp Servidor.cpp Planos/PlanoDePista.cpp Partida/MundoBox2D.cpp Acciones/Accion.cpp Acciones/Frenar.cpp Acciones/GiroAIzquierda.cpp
        Acciones/GiroADerecha.cpp Acciones/Acelerar.cpp Objetos/Carro/Vida.cpp Objetos/Modificadores/Modificador.cpp Objetos/Modificadores/CajaDeSalud.cpp Objetos/Carro/VelocidadBase.cpp
        Objetos/Carro/VelocidadBoost.cpp Objetos/Carro/EstadoVelocidad.cpp Objetos/Suelos/Curva.cpp
        Objetos/Modificadores/Boost.cpp Objetos/Modificadores/Barro.cpp Objetos/Modificadores/Aceite.cpp Objetos/Carro/Visibilidad.cpp Objetos/Carro/Agarre.cpp Partida/Partida.cpp
        Objetos/Modificadores/Piedra.cpp Objetos/Carro/Carro.cpp Hilo.h Planos/PlanoDeCarro.cpp Planos/PlanoDeCarro.h ConfiguracionServidor.cpp ConfiguracionServidor.h ServidorException.cpp ServidorException.h PartidaLlenaExcepcion.cpp PartidaLlenaExcepcion.h Comunicacion/Estados/EstadoCliente.cpp Comunicacion/Estados/EstadoCliente.h Comunicacion/Estados/EnMenu.cpp Comunicacion/Estados/EnMenu.h Comunicacion/Eventos/EventosEjecutables/CrearPartida.cpp Comunicacion/Eventos/EventosEjecutables/CrearPartida.h Comunicacion/Eventos/EventosEjecutables/UnirAPartida.cpp Comunicacion/Eventos/EventosEjecutables/UnirAPartida.h Comunicacion/Estados/EnJuego.cpp Comunicacion/Estados/EnJuego.h Comunicacion/Eventos/EventosEjecutables/RecibirAccion.cpp Comunicacion/Eventos/EventosEjecutables/RecibirAccion.h Comunicacion/HiloCliente.cpp Comunicacion/HiloCliente.h Comunicacion/Estados/EstadoPartida.cpp Comunicacion/Estados/EstadoPartida.h Comunicacion/Estados/EnEspera.cpp Comunicacion/Estados/EnEspera.h Comunicacion/Estados/EnCarrera.cpp Comunicacion/Estados/EnCarrera.h Comunicacion/Eventos/EventosEjecutables/ObtenerPartidas.cpp Comunicacion/Eventos/EventosEjecutables/ObtenerPartidas.h Partida/Podio.cpp Partida/Podio.h Objetos/Carro/Posicion.cpp Objetos/Carro/Posicion.h Partida/HashProtegido.cpp Partida/HashProtegido.h Comunicacion/ColaBloqueante.cpp Comunicacion/ColaBloqueante.h  Comunicacion/HiloEnviador.cpp Comunicacion/HiloEnviador.h Comunicacion/Eventos/EventosParseables/EnviarPartidas.cpp Comunicacion/Eventos/EventosParseables/EnviarPartidas.h Comunicacion/Eventos/EventosParseables/NoSePudoUnir.cpp Comunicacion/Eventos/EventosParseables/NoSePudoUnir.h Comunicacion/Eventos/EventosParseables/UnirAPartidaCorrecto.cpp Comunicacion/Eventos/EventosParseables/UnirAPartidaCorrecto.h Comunicacion/Eventos/EventosParseables/PartidaInvalida.cpp Comunicacion/Eventos/EventosParseables/PartidaInvalida.h Comunicacion/ClienteCerradoExcepcion.cpp Comunicacion/ClienteCerradoExcepcion.h Comunicacion/Eventos/EventosParseables/ComenzoLaPartida.cpp Comunicacion/Eventos/EventosParseables/ComenzoLaPartida.h Comunicacion/Eventos/EventosParseables/EnviarMapa.cpp Comunicacion/Eventos/EventosParseables/EnviarMapa.h Comunicacion/Eventos/EventosParseables/EnviarAutoPropio.cpp Comunicacion/Eventos/EventosParseables/EnviarAutoPropio.h Comunicacion/Eventos/EventosParseables/FinSimulacion.cpp Comunicacion/Eventos/EventosParseables/FinSimulacion.h Comunicacion/Eventos/EventosParseables/EnviarExtra.cpp Comunicacion/Eventos/EventosParseables/EnviarExtra.h Partida/HashProtegidoClientes.cpp Partida/HashProtegidoClientes.h
        Objetos/Modificadores/Piedra.cpp Objetos/Carro/Carro.cpp Hilo.h Planos/PlanoDeCarro.cpp Planos/PlanoDeCarro.h ConfiguracionServidor.cpp ConfiguracionServidor.h
        ServidorException.cpp ServidorException.h PartidaLlenaExcepcion.cpp PartidaLlenaExcepcion.h Comunicacion/Estados/EstadoCliente.cpp Comunicacion/Estados/EstadoCliente.h Comunicacion/Estados/EnMenu.cpp Comunicacion/Estados/EnMenu.h Comunicacion/Eventos/EventosEjecutables/CrearPartida.cpp Comunicacion/Eventos/EventosEjecutables/CrearPartida.h Comunicacion/Eventos/EventosEjecutables/UnirAPartida.cpp Comunicacion/Eventos/EventosEjecutables/UnirAPartida.h Comunicacion/Estados/EnJuego.cpp Comunicacion/Estados/EnJuego.h Comunicacion/Eventos/EventosEjecutables/RecibirAccion.cpp Comunicacion/Eventos/EventosEjecutables/RecibirAccion.h Comunicacion/HiloCliente.cpp Comunicacion/HiloCliente.h Comunicacion/Estados/EstadoPartida.cpp Comunicacion/Estados/EstadoPartida.h Comunicacion/Estados/EnEspera.cpp Comunicacion/Estados/EnEspera.h Comunicacion/Estados/EnCarrera.cpp Comunicacion/Estados/EnCarrera.h Comunicacion/Eventos/EventosEjecutables/ObtenerPartidas.cpp Comunicacion/Eventos/EventosEjecutables/ObtenerPartidas.h Partida/Podio.cpp Partida/Podio.h Objetos/Carro/Posicion.cpp Objetos/Carro/Posicion.h Partida/HashProtegido.cpp Partida/HashProtegido.h Comunicacion/ColaBloqueante.cpp Comunicacion/ColaBloqueante.h  Comunicacion/HiloEnviador.cpp Comunicacion/HiloEnviador.h Comunicacion/Eventos/EventosEjecutables/EventoEjecutable.cpp Comunicacion/Eventos/EventosEjecutables/EventoEjecutable.h Comunicacion/Eventos/EventosParseables/EnviarPartidas.cpp Comunicacion/Eventos/EventosParseables/EnviarPartidas.h Comunicacion/Eventos/EventosParseables/EventoParseable.cpp Comunicacion/Eventos/EventosParseables/EventoParseable.h Comunicacion/Eventos/EventosParseables/NoSePudoUnir.cpp Comunicacion/Eventos/EventosParseables/NoSePudoUnir.h Comunicacion/Eventos/EventosParseables/UnirAPartidaCorrecto.cpp Comunicacion/Eventos/EventosParseables/UnirAPartidaCorrecto.h Comunicacion/Eventos/EventosParseables/PartidaInvalida.cpp Comunicacion/Eventos/EventosParseables/PartidaInvalida.h Comunicacion/ClienteCerradoExcepcion.cpp Comunicacion/ClienteCerradoExcepcion.h Comunicacion/Eventos/EventosParseables/ComenzoLaPartida.cpp Comunicacion/Eventos/EventosParseables/ComenzoLaPartida.h Comunicacion/Eventos/EventosParseables/EnviarMapa.cpp Comunicacion/Eventos/EventosParseables/EnviarMapa.h Comunicacion/Eventos/EventosParseables/EnviarAutoPropio.cpp Comunicacion/Eventos/EventosParseables/EnviarAutoPropio.h Comunicacion/Eventos/EventosParseables/FinSimulacion.cpp Comunicacion/Eventos/EventosParseables/FinSimulacion.h Comunicacion/Eventos/EventosParseables/EnviarExtra.cpp Comunicacion/Eventos/EventosParseables/EnviarExtra.h Comunicacion/Eventos/EventosParseables/EnviarPodio.cpp Comunicacion/Eventos/EventosParseables/EnviarPodio.h Comunicacion/Eventos/EventosParseables/ServidorCerrado.cpp Comunicacion/Eventos/EventosParseables/ServidorCerrado.h Comunicacion/Eventos/EventosParseables/EliminarCarro.cpp Comunicacion/Eventos/EventosParseables/EliminarCarro.h)

install(FILES configuracion.yaml DESTINATION ${CMAKE_BINARY_DIR})

add_executable(tp ${SOURCE_FILES} main.cpp Comunicacion/ClienteProxy.cpp
        Comunicacion/Utilidades.cpp
        Comunicacion/Sockets/SocketPasivo.cpp Comunicacion/Protocolo.cpp Comunicacion/Sockets/SocketAmigo.cpp Comunicacion/Sockets/SocketPassiveException.cpp Comunicacion/Sockets/SocketPeerException.cpp Comunicacion/Sockets/SocketPassiveException.cpp Comunicacion/Sockets/SocketException.cpp Servidor.cpp Planos/PlanoDePista.cpp Partida/MundoBox2D.cpp Acciones/Accion.cpp Acciones/Acelerar.cpp Acciones/Frenar.cpp
        Acciones/GiroAIzquierda.cpp Acciones/GiroADerecha.cpp Objetos/Carro/Vida.cpp Objetos/Modificadores/Modificador.cpp Objetos/Modificadores/CajaDeSalud.cpp Objetos/Modificadores/Piedra.cpp
        Objetos/Carro/VelocidadBase.cpp Objetos/Carro/VelocidadBoost.cpp Objetos/Carro/EstadoVelocidad.cpp
        Objetos/Modificadores/Boost.cpp Objetos/Modificadores/Barro.cpp Objetos/Modificadores/Aceite.cpp Objetos/Carro/Visibilidad.cpp Objetos/Carro/Agarre.cpp Objetos/Suelos/Curva.cpp
        Objetos/Carro/Carro.cpp Objetos/Suelos/Recta.cpp Partida/ManejadorDeContactos.cpp Objetos/Suelos/Asfalto.cpp Partida/Partida.cpp
        Objetos/Suelos/LimiteDePista.cpp Objetos/Suelos/Pasto.cpp Objetos/Carro/Velocidad.cpp Planos/PlanoDeSuelo.h Planos/PlanoDeRecta.cpp Planos/PlanoDeRecta.h Planos/PlanoDeCurva.cpp Planos/PlanoDeCurva.h Partida/Pista.cpp Partida/Pista.h Objetos/Objeto.cpp Objetos/Suelos/Material.cpp)


target_link_libraries(tp tobanteGaming::Box2D)
target_link_libraries(tp yaml-cpp)
